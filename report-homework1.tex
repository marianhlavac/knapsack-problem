
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{report-homework1}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    

    
    \section{MI-PAA, Úloha 1: Řešení problému batohu metodou hrubé síly a
jednoduchou
heuristikou}\label{mi-paa-uxfaloha-1-ux159eux161enuxed-probluxe9mu-batohu-metodou-hrubuxe9-suxedly-a-jednoduchou-heuristikou}

\textbf{Marián Hlaváč}, 18 Oct 2017 (hlavam30)\\
marian.hlavac@fit.cvut.cz\\
https://github.com/mmajko/knapsack-problem

\subsection{Zadání úlohy}\label{zaduxe1nuxed-uxfalohy}

\begin{itemize}
\tightlist
\item
  Naprogramujte řešení problému batohu hrubou silou (tj. exaktně). Na
  zkušebních datech pozorujte závislost výpočetního času na n.
\item
  Naprogramujte řešení problému batohu heuristikou podle poměru
  cena/váha. Pozorujte závislost výpočetního času na n, průměrnou a
  maximální relativní chybu (tj. zhoršení proti exaktní metodě) v
  závislosti na n.
\end{itemize}

    \subsection{Možné varianty
řešení}\label{moux17enuxe9-varianty-ux159eux161enuxed}

Problém batohu je možné řešit hrubou silou, heuristicky, dynamickým
programováním, algoritmem "meet-in-the-middle" a dalšími způsoby.
Heuristická metoda řešení se dále dělí i podle zvolené heuristiky, např.
jednoduchá greedy heuristika upřednostňuje nejdražší předměty. Takových
heuristik existuje více, liší se rychlostí i komplexitou.

Zvolenou variantou pro první úlohu jsou řešení hrubou silou a
jednoduchou heuristikou využívající poměr cena/váha u jednotlivých
předmětů.

\subsection{Popis postupu řešení}\label{popis-postupu-ux159eux161enuxed}

Algoritmus a celý program poskytující výsledky je napsán v jazyce
\emph{Rust}. Tento program načte instance z předpřipravených datových
souborů určených pro tuto úlohu a vypočte řešení hrubou silou a řešení
za pomoci heuristiky. Zapíše délku provádění výpočtu a všechna data
poskytne v CSV formátu.

Druhým nástrojem je pak \emph{Jupyter Notebook}, ve kterém se poskytnutá
data zpracují a vizualizují, zapíšou se výsledky těchto měření výpočtů a
sepíše se zpráva.

\newpage

\subsubsection{Kostra algoritmu}\label{kostra-algoritmu}

Kompletně celý algoritmus je k nahlédnutí ve zdrojových souborech
programu. Pro rychlou představu je níže uveden krátký náhled na
algoritmus výpočtu za pomoci heuristiky v jazyce Rust, který je aktuálně
použit pro výsledky uvedené níže.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{...}
\KeywordTok{fn}\NormalTok{ solve_heuristic(knap: &Knapsack) -> (}\DataTypeTok{u16}\NormalTok{, }\DataTypeTok{u16}\NormalTok{, }\DataTypeTok{u32}\NormalTok{) }\OperatorTok{\{}
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ items: }\DataTypeTok{Vec}\NormalTok{<(}\DataTypeTok{usize}\NormalTok{, &KnapItem)> = knap.items.iter().enumerate().collect();}
\NormalTok{    items.sort_unstable_by(|a, b| (a.}\DecValTok{1.}\NormalTok{price / a.}\DecValTok{1.}\NormalTok{weight).cmp(&(b.}\DecValTok{1.}\NormalTok{price / b.}\DecValTok{1.}\NormalTok{weight)));}
    
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ result_items: }\DataTypeTok{Vec}\NormalTok{<&KnapItem> = }\PreprocessorTok{vec!}\OperatorTok{[]}\NormalTok{;}
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ total_weight = }\DecValTok{0}\NormalTok{;}
    \KeywordTok{for}\NormalTok{ item }\KeywordTok{in}\NormalTok{ items }\OperatorTok{\{}
        \KeywordTok{if}\NormalTok{ item.}\DecValTok{1.}\NormalTok{weight + total_weight <= knap.capacity }\OperatorTok{\{}
\NormalTok{            result_items.push(item.}\DecValTok{1}\NormalTok{);}
\NormalTok{            total_weight += item.}\DecValTok{1.}\NormalTok{weight;}
        \OperatorTok{\}} \KeywordTok{else} \OperatorTok{\{}
            \KeywordTok{break}\NormalTok{;}
        \OperatorTok{\}}
    \OperatorTok{\}}
\NormalTok{...}
\end{Highlighting}
\end{Shaded}

Při výpočtu hrubou silou jsou pro každou jednotlivou instanci vyzkoušeny
všechny kombinace umístění předmětů do batohu a následně je vybrána ta
nejlepší vhodná (optimální). U této metody si můžeme být jisti, za
předpokladu, že je výpočet kompletní, že jsme nalezli optimální řešení.

Implementační detaily řešení lze nalézt ve zdrojových kódech. Byla
použita bitová maska přítomnosti předmětu v batohu.

Výpočet heuristikou pak spočívá v seřazení pole předmětů podle kritéria
heuristiky. Z tohoto pole jsou pak vybírány předměty do vyčerpání jeho
kapacity.

    \subsection{Surová naměřená (raw)
data}\label{surovuxe1-namux11bux159enuxe1-raw-data}

Níže uvedená tabulka je náhled na kompletní surová výstupní data z
programu. Data můžete sami (např. pro kontrolu) získat jednoduchým
způsobem - spuštěním skriptu \texttt{generate.sh}, který vytvoří soubor
\texttt{results.csv} obsahující tato data.


\newpage

\subsubsection{Sloupce}\label{sloupce}

Názvy sloupců se vyskytují i dále v textu, zde je jejich stručný popis:

\begin{itemize}
\tightlist
\item
  \textbf{knap\_id} - identifikátor instance
\item
  \textbf{item\_count} - počet předmětů (konfigurace instance)
\item
  \textbf{capacity} - kapacita batohu
\item
  \textbf{method} - metoda výpočtu
\item
  \emph{Bruteforce} je výpočet hrubou silou, \emph{Heuristic} je
  heuristický výpočet (heuristika poměru váha/cena)
\item
  \textbf{price} - vypočtená celková cena batohu
\item
  \textbf{weight} - vypočtená celková váha batohu
\item
  \textbf{bitmask} - bitmaska (jednoznačný identifikátor, maska
  přítomnosti předmětu) řešení
\item
  \textbf{elapsed\_ms} - doba výpočtu v milisekundách
\item
  \textbf{optimal\_price} - optimální cena batohu
\end{itemize}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}1}]:}      knap\_id  item\_count  capacity      method  price  weight     bitmask  \textbackslash{}
        0       9000           4       100  Bruteforce    473      63          11   
        1       9000           4       100   Heuristic    415      91          12   
        2       9001           4       100  Bruteforce    326      66          12   
        3       9001           4       100   Heuristic    326      66          12   
        4       9002           4       100  Bruteforce    196      89           1   
        ..       {\ldots}         {\ldots}       {\ldots}         {\ldots}    {\ldots}     {\ldots}         {\ldots}   
        699     9349          27       350   Heuristic   1377     350    40768454   
        700     9350          30       400  Bruteforce   2875     393  1056430717   
        701     9350          30       400   Heuristic    964     400   195587474   
        702     9351          30       400  Bruteforce   3327     398   448640766   
        703     9351          30       400   Heuristic   1566     400  1073170761   
        
                elapsed\_ms  optimal\_price  
        0         0.007279            473  
        1         0.004148            473  
        2         0.001998            326  
        3         0.000586            326  
        4         0.001750            196  
        ..             {\ldots}            {\ldots}  
        699       0.007884           3019  
        700  305249.000000           2875  
        701       0.008099           2875  
        702  312861.000000           3327  
        703       0.016862           3327  
        
        [704 rows x 9 columns]
\end{Verbatim}
            
    \subsection{Výsledky měření}\label{vuxfdsledky-mux11bux159enuxed}

Níže jsou uvedeny výsledky derivované z dat. Rychlosti řešení jsou
seskupeny podle počtu předmětů a zprůměrovány. Výsledné průměrné časy
jsou ke každé metodě řešení uvedeny jak tabulkou, tak grafem.

Měřítko grafů je lineární na vertikální ose.

    \subsubsection{Rychlost řešení hrubou
silou}\label{rychlost-ux159eux161enuxed-hrubou-silou}

Měření hrubou silou je výpočetně náročná metoda. Složitost je
\texttt{O(2\^{}n)}, takže lze očekávat rapidně vzrůstající trend doby
nutné pro dokončení výpočtu touto metodou.


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}2}]:}                elapsed\_ms
        item\_count               
        4                0.001655
        10               0.194171
        15               7.060000
        20             269.920000
        22            1111.440000
        25            9100.080000
        27           37292.540000
        30          309055.000000
\end{Verbatim}
            
\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}3}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0x10958ed30>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{report-homework1_files/report-homework1_7_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Na výsledných datech lze pozorovat velmi rychle vzrůstající časovou
závislost na počtu předmětů.

Díky složitosti \texttt{O(2\^{}n)} obecně platí, že přidání jednoho
dalšího předmětů zdvojnásobí celý výpočetní čas. Na výsledných datech
lze tuto vlastnost snadno pozorovat.

Kupříkladu pro 20 předmětů byla průměrná doba výpočtu \texttt{266\ ms}.
Pro 22 předmětů \texttt{1100\ ms}. To je 4.13 násobek původního čísla,
šlo o rozdíl dvou předmětů, tudíž dvojnásobek času za každý přidaný
předmět skutečně odpovídá.

    \subsubsection{Rychlost řešení jednoduchou
heuristikou}\label{rychlost-ux159eux161enuxed-jednoduchou-heuristikou}

Rychlost řešení heuristikou by měla být podstatně méně časově náročná,
než výpočet hrubou silou.

Jelikož je v průběhu řešení řazeno pole podle heuristiky, lze očekávat,
že se vzrůstajícím počtem předmětů v poli se prodlouží i doba řazení
tohoto pole.

Řazení pole má na starosti funkce jazyka \emph{Rust}
\texttt{Vec::sort\_unstable\_by()}, která slibuje složitost O(n log n) a
je založena na \href{https://github.com/orlp/pdqsort}{pattern-defeating
quicksortu}.

Zbytek algoritmu po seřazení je lineární (složitost v této části
nezávisí na \textbf{n}, tedy počtu předmětů, ale na kapacitě batohu a
velikosti předmětů - irelevantní pro naše pozorování).


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}4}]:}             elapsed\_ms
        item\_count            
        4             0.000540
        10            0.001171
        15            0.002403
        20            0.006412
        22            0.007157
        25            0.007743
        27            0.009636
        30            0.012481
\end{Verbatim}
            
\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}5}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0x105d2a278>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{report-homework1_files/report-homework1_11_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Na grafu lze pozorovat lineární vzrůst výpočetního času při vzrůstu
počtu předmětů. Rozdíl je však v relativně nepatrný. Na grafu je
důležité si všimnout rozsahu vertikální osy, která se se pohybuje v
desetinách milisekund. Příčina pozorovaného vzrůstu je pak dána nutností
řadit delší pole předmětů, což výpočetní čas ovlivňuje relativně
minimálně.

Pokud bychom následovali lineární trend, citelnou časovou prodlevu
bychom mohli pozorovat už při např. 100 000 předmětech, které by
způsobily přibližně \texttt{133\ ms} dlouhou prodlevu, za předpokladu,
že takovou prodlevu předpokládáme za citelnou (tvrzení je spíše
subjektivní záležitostí, nelze jednoznačně říct, co je dlouhá prodleva).

    \subsubsection{Relativní chyby při výpočtu
heuristikou}\label{relativnuxed-chyby-pux159i-vuxfdpoux10dtu-heuristikou}

Jednoduchá heuristika, jako ta, která byla použita v této úloze, s
největší pravděpodobností nebude schopná určit optimální řešení v každé
instanci.

Relativní chybou lze určit úspěšnost heuristického výpočtu vůči
exaktního výpočtu hrubou silou. Relativní chyby jsou uvedeny v
procentech.


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}6}]:}      knap\_id  item\_count  optimal\_price  price  error  relative\_error\_\%
        1       9000           4            473    415     58         12.262156
        3       9001           4            326    326      0          0.000000
        5       9002           4            196    196      0          0.000000
        7       9003           4            545    437    108         19.816514
        9       9004           4            243    243      0          0.000000
        ..       {\ldots}         {\ldots}            {\ldots}    {\ldots}    {\ldots}               {\ldots}
        695     9347          27           2545   1049   1496         58.781925
        697     9348          27           2846   1563   1283         45.080815
        699     9349          27           3019   1377   1642         54.388870
        701     9350          30           2875    964   1911         66.469565
        703     9351          30           3327   1566   1761         52.930568
        
        [352 rows x 6 columns]
\end{Verbatim}


\newpage

            
\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}7}]:}     avg\_rel\_error\_\%  max\_rel\_error\_\%
        4          9.125447        72.727273
        10        26.621721        61.094819
        15        27.724194        56.969697
        20        45.451606        69.780220
        22        50.922441        71.792657
        25        51.913568        69.696970
        27        49.994587        63.565062
        30        59.700067        66.469565
\end{Verbatim}
      
\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}8}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0x1097b5ba8>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{report-homework1_files/report-homework1_16_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}9}]:}       avg\_rel\_error\_\%
        mean        40.181704
        std         17.161356
        min          9.125447
        25\%         27.448576
        50\%         47.723097
        75\%         51.170223
        max         59.700067
\end{Verbatim}
            
    Na grafu lze pozorovat mírně vzrůstající trend průměrné relativní chyby
při vzrůstajícím počtu předmětů. O lineární vzrůst však s největší
pravděpodobností nepůjde a dalo by se spíše předpokládat, že hodnota
průměrné chyby se limitně blíží k 50\%. Lepší odhad by poskytl větší
vzorek dat, pro větší počty předmětů.

Grafická reprezentace maximální relativní chyby nenese žádnou podstatnou
informaci (z grafu nelze vyčíst nic použitelného pro závěr).

    \subsection{Závěr}\label{zuxe1vux11br}

Prvotní předpoklad, že výpočet problému batohu pomocí jednoduché
heuristiky bude řádově rychlejší, než výpočet hrubou silou, se potvrdil.
Na datech lze vidět důsledky složitosti algoritmu \texttt{O(2\^{}n)}.

Průměrná relativní chyba při řešení pomocí heuristiky se ukázala, že je
spíše vyšší a tak se podstatně liší i kvalita řešení obou metod. Metoda
řešení pomocí heuristiky totiž vrací spíše méně kvalitní řešení (často
\texttt{\textless{}50\%}).

Lze tvrdit, že výpočet heuristikou se vyplácí až v bodě, kdy relativní
chyba řešení nevzrůstá, protože víme, že časová náročnost řešení hrubou
silou bude vzrůstat zaručeně vždy. K potvrzení tohoto tvrzení by byly
vhodné další vzorky dat pro vyšší počty předmětů, aby mohl být trend
relativní chyby jednoznačně určitelný. Výpočet dalších vzorků dat je
však časově náročný a přesahuje hranice této úlohy.

Zdrojové soubory úlohy lze najít na GitHubu. Link je uveden v hlavičce
zprávy.


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
